import{_ as T,u as v,a as y,h as S,i as w,j as z,r as m,k as g,l as C,b as i,c as l,d as t,m as D,f as o,T as x,n as _,t as n,F as p,e as A,g as B}from"./index-BkSPK54B.js";const E={class:"connected__block"},N={class:"statistic"},Q={class:"stat__c balance-block"},F={class:"stat__c best-record"},I={class:"stat__c best-gameLen"},L={class:"Tasks"},j={class:"t Tasks_content"},O=["data-index"],R={key:0,class:"plaska_act"},V={class:"task__title"},W=["onClick"],K={__name:"profile",setup(U){let r=v().getStat,f=y(S.tasks);const{sendTransaction:h,addMessage:u,sending:X,error:q}=w();z().tonConnectUI.value;let b=m(g().value!=""),c=m(g().value);C();async function k(a){if(console.log(a),c.value==""){d("error","you not connected"),console.log("error");return}try{switch(a.type_task){case"connect":c.value!=""&&(a.isDone=!0,d("succes","Поздравляем"));break;case"call_contract":console.log(c.value),u(c.value,"100000"),await fetch("https://toncenter.com/api/v2/getTransactions?address=EQD4eA1SdQOivBbTczzElFmfiKu4SXNL4S29TReQwzzr_70k&limit=10&to_lt=0&archival=true").then(e=>{console.log(e.json())}),u("EQD4eA1SdQOivBbTczzElFmfiKu4SXNL4S29TReQwzzr_70k","100000"),h(),console.log(window.Telegram);break;case"share_link":tg.WebApp.shareApp();break;case"drawing_picture":if(v().getImages.length>=5){a.isDone=!0,d("succes","Поздравляем");break}}}catch{console.log("z")}}function d(a,s){let e=document.createElement("div");e.textContent=s,e.className="message-block "+a,document.querySelector("#app").append(e),setTimeout(()=>{e.remove()},1e3)}return(a,s)=>(i(),l(p,null,[t("div",E,[D(o(x)),t("div",{class:_(["status__wallet",{active:o(b)}])},n(o(c)!=""?"you connected":"no active"),3)]),s[1]||(s[1]=t("div",{class:"profile-tg"},null,-1)),t("div",N,[t("div",Q,n(o(r).bal)+"$TROW",1),t("div",F,"Лучший рекорд: "+n(o(r).best_game_record),1),t("div",I,"Количество игр: "+n(o(r).game_len),1)]),t("div",L,[s[0]||(s[0]=t("div",{style:{"font-size":"1.5em","font-weight":"600"}},"Задания",-1)),t("div",j,[(i(!0),l(p,null,A(o(f),e=>(i(),l("div",{"data-index":e.id,class:_(["task",{active:!e.isDone}]),key:e.id},[e.isDone?(i(),l("div",R)):B("",!0),t("div",V,n(e.title),1),t("div",{class:_(["task__type-task but",{notActive:e.isDone}]),onClick:()=>k(e)},n(e.reward),11,W)],10,O))),128))])])],64))}},M=T(K,[["__scopeId","data-v-48f315b3"]]);export{M as default};
